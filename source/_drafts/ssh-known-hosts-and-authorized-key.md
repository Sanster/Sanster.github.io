title: ssh-known_hosts-and-authorized_key
date: 2016-07-16 07:47:15
category:
tags: ssh
---

关于 SSH 的知识可以看阮一峰这两篇博客：
*
* 

SSH 用到的两个文件：
＊ ~/.ssh/authorized_keys
＊ ~/.ssh/know_hosts

SSH 出于不同的目的使用这两个文件

如果服务器上没有配置公钥，使用 SSH 协议登录服务器时，默认是使用用户名和密码登录，这里的用户指的是服务器上存在的某个用户，SSH 进程会向操作系统确认这组用户名和密码是否可以登录。

除了用户名和密码外，SSH 还允许使用「公钥」登录。使用`ssh-keygen`后会生成两个文件，xx 和 xxx，xxx 就是公钥，你可以给别人，xx 是私钥，要保管好。

要让服务器端的 SSH 使用公钥进行授权，需要你将你的公钥放到服务器端的 authorized_keys 文件中，当你使用 ssh 连接服务器时，SSH 会向操作系统确认这个用户是否可以登录，可以的话 SSH 就会去确认你的私钥是否与 authorized_keys 中的公钥配对，如果配对成功，那么就可以登录了。

`authorized_keys`：存放服务器上授权过的客户端公钥，当客户端连接服务器时，服务器通过检查这个公钥列表来进行授权。

`know_hosts`：客户端使用这个文件验证是否连接到了一个真实的服务器，而不是一个impersonator。

know_hosts 文件的用法其实与 authorized_keys 的用法很像，他是客户端用来验证服务器端的。服务器上也存放着一组公钥和私钥， 每次你连接服务器时，服务器会给你他的公钥，以及证明他有私钥的证明，如果客户端没有它的公钥，就会向你确认是否要加入到 known_hosts 文件当中，如果在这个文件当中已经有了，你就可以连上了。